<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head th:replace="~{fragments :: head}"></head>
<body class="container">
<div class="padding-container">
<header th:replace="~{fragments :: header}"></header>
    <div class="padding-container">
<div class="garden-detail-garden-wrapper">
        <h2  th:text="${garden.name + ' Beds'}"></h2>

        <th:block th:each="bed : ${garden.beds}">

            <div class="garden-detail-table-wrapper" th:id="${bed.id}">
                <h3 class="garden-detail-caption" th:text="${bed.name}"></h3>

                <div class="garden-detail-table-border">

                    <div class="garden-detail-table-inner-border">


<!--                        <div class="garden-detail-table-inner-border-2">-->

                            <div class ="garden-detail-table" th:style="'grid-template-columns: repeat('+ ${bed.bedWidthPlots} +', 1fr);'">

                                <th:block th:each="plot: ${bed.plots}">
                                <div class="garden-detail-td" th:id="${plot.id}">
                                    <div th:if="${plot.planting}">
                                        <div class="centered">
                                        <h5><a th:href="'../plot/detail?plotId=' + ${plot.id}" class="link-shadow">Plot Details</a></h5>
<!--                                            <a th:href="'/garden/detail?gardenId=' + ${garden.id}" th:text="${garden.name}"></a>-->


                                        <img th:src="'/images/' + ${plot.planting.plant.plantIcon.src} + '.png'" alt="${plot.planting.plant.plantIcon.description}" width="60" />

                                            <p th:text="${plot.planting.plant.name}"></p>
                                        </div>
                                            <hr/>

                                        <span>Plant Date:</span>

                                        <p th:text="${plot.planting.plantingDate}"></p>
                                        <hr>

                                        <th:block th:if="${plot.planting.daysUntilHarvestStartDate}">

                                            <span   th:if="${plot.planting.daysUntilHarvestStartDate == 0}"
                                                th:style="'font-weight: bold; color: hsla(120, 100%, 13%, 1)'" class="light-shadow">Harvest Starts Today!</span>

                                            <th:block th:if="${plot.planting.daysUntilHarvestStartDate > 0}">
                                            <span>Days Until <br/> Harvest:</span>
                                            <span th:text="${plot.planting.daysUntilHarvestStartDate}"></span>
                                            </th:block>

                                            <th:block th:if="${plot.planting.daysUntilHarvestStartDate < 0}">
                                                <div  class="font-weight-bold light-shadow" th:style="'color: hsla(120, 100%, 13%, 1)'">
                                                <span>Harvest Started </span>
                                                <br/>
                                                <span th:text="${plot.planting.daysUntilHarvestStartDate * -1}" ></span>
                                                <span th:text="${plot.planting.daysUntilHarvestStartDate < -1 ? ' Days ' : ' Day '}"></span>
                                                <span> Ago.</span>
                                                </div>
                                            </th:block>

                                            <hr/>

                                        </th:block>
                                        <th:block th:if="${plot.planting.daysUntilRemoveStartDate}">
                                            <th:block th:if="${plot.planting.daysUntilRemoveStartDate == 0}">
                                            <span th:style="'font-weight: bold; color: hsla(210, 50%, 30%, 1)'" class="light-shadow">Removal Starts Today!</span>
                                                <br/>
                                            </th:block>
                                            <th:block th:if="${plot.planting.daysUntilRemoveStartDate > 0}">
                                                <span>Days Until <br/> Removal:</span>
                                                <span th:text="${plot.planting.daysUntilRemoveStartDate}"></span>
                                                <br/>
                                            </th:block>

                                            <th:block th:if="${plot.planting.daysUntilRemoveStartDate < 0}">
                                                <div  class="font-weight-bold light-shadow" th:style="'color: hsla(210, 50%, 30%, 1)'">
                                                <span>Removal Started </span>
                                                <br/>
                                                <span th:text="${plot.planting.daysUntilRemoveStartDate * -1}"></span>
                                                <span th:text="${plot.planting.daysUntilRemoveStartDate < -1 ? ' Days ' : ' Day '}"></span>
                                                <span> Ago.</span>
                                                </div>
                                            </th:block>

                                        </th:block>
                                        <hr/>
                                        <form method="post">
                                            <input hidden name="plotId" th:value="${plot.id}"/>
                                        <button class="btn btn-secondary">Remove</button>
                                        </form>

                                    </div>

                                    <form method="post" th:unless="${plot.planting}">
                                    <h5 class="link-shadow standard-text-color">Plant Here</h5>
                                        <input hidden name="plotId" th:value="${plot.id}"/>


                                       <select  th:name="plantId">
                                            <option>Select Plant</option>
                                           <option th:each="plant : ${plants}"
                                                    th:value="${plant.id}"
                                                    th:text="${plant.name}"
                                            ></option>
                                       </select>

                                        <input type="hidden" id="scrollPosition" value="@{getScrollPosition()}" />

                                        <button class="btn btn-primary" th:text="Plant"></button>
                                    </form>
                                </div>
                    </th:block>

                    </div>
                        </div>
                    </div>
<!--                </div>-->
            </div>
        </th:block>

        </div>
    </div>
</div>



<th:block th:replace="~{fragments :: endingScripts}"></th:block>
</body>
</html>